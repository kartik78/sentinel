 /* 
  * Sentinel JS 
  * Author : Kartik Rao - kartikeya.rao@gmail.com 
  * Version : 1.0 
  * 
  * MIT Licensed for Non Commercial Use 
  * 
  * For commercial use please contact the author 
  * 
  */
(function(){window.sentinel={};var a=function(b,d,e){e.$$guid||(e.$$guid=a.guid++),b.events||(b.events={});var f=b.events[d];f||(f=b.events[d]={},b["on"+d]&&(f[0]=b["on"+d])),f[e.$$guid]=e,b["on"+d]=c};a.guid=1;var b=function(a,b,c){a.events&&a.events[b]&&delete a.events[b][c.$$guid]},c=function(a){a=a||window.event;var b=this.events[a.type];for(var c in b)this.$$handleEvent=b[c],this.$$handleEvent(a)},d={innerHeight:typeof window.innerHeight=="number",docElemClientHeight:document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight),docClientHeight:document.body&&(document.body.clientWidth||document.body.clientHeight)},e={guid:0,defaultDistance:100},f={},g={HASH:"hash",SCROLL:"scroll"},h=function(a,b){var c=document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop,e=0;d.innerHeight?e=window.innerHeight:d.docElemClientHeight?e=document.documentElement.clientHeight:d.docClientHeight&&(e=document.body.clientHeight);var f=parseInt(a.offsetTop),g=parseInt(e+c);if(g>=f-b)return!0;return!1},i=function(){var a;for(a in f)if(f.hasOwnProperty(a)){var b=f[a].element,c=f[a].distance;if(b.getAttribute(g.HASH)&&h(b,c))try{f[a].callback.call(),unwatchElement(a)}catch(d){throw d}}};sentinel.watchElement=function(a,b,c){if(h(a,c||e.defaultDistance))try{b.call()}catch(d){throw d}else if(!a.getAttribute(g.HASH)){var i=e.guid++;a.setAttribute(g.HASH,i),f[i]={element:a,callback:b,distance:c||e.defaultDistance}}},sentinel.unwatchElement=function(a){var c=f[a];c&&(c.element.setAttribute(g.HASH,""),delete f[a],f.length===0&&b(window,g.SCROLL,i))},sentinel.init=function(b){b&&typeof b.distance=="number"&&(e.defaultDistance=b.distance),a(window,g.SCROLL,i),e.init=!0}})()